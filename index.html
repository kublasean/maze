<hmtl>
  <head>
    <title>maze</title>
    <script src="arcball.js"></script>
    <script src="dset.js"></script>
    <script src="mazemake.js"></script>
    <script src="util/sylvester.js"></script>
    <script src="util/gl_util.js"></script>
    <script src="util/gl_transforms.js"></script>
    <script src="util/shaders.js"></script>
    <script src="util/model.js"></script>
    <script src="util/math.js"></script>
    <script src="util/events.js"></script>
    <script src="camera.js"></script>
    <script src="gl_main.js"></script>
    <style>
    body, html {
      margin: 0;
      padding: 0;
      border: 0;
      width: 100%;
      height: 100%;
      background-color: grey;
      overflow: hidden;
    }

    form {

    }
      canvas {
        width: 100%;
        height: 100%;
        background-color: white;
      }
    </style>
  </head>
  <body>
    <form>
      Enter the size of a cube side:<br>
      <input type="text" name="N"><br>
      <input type="submit" value="Submit">
    </form>
    <canvas id="glcanvas">canvas not supported</canvas>
    <script id="FragmentShader2D" type="x-shader/x-fragment">
    	#ifdef GL_OES_standard_derivatives
    		#extension GL_OES_standard_derivatives : enable
    	#endif
    	precision mediump float;

      uniform vec4      u_color;

    	void main(void) {
    		gl_FragColor = u_color;
    	}
    </script>

    <script id="VertexShader2D" type="x-shader/x-vertex">
    	precision mediump float;

    	attribute vec4		a_position;
      uniform mat4      u_projection;
      uniform mat4      u_view;
      uniform mat4      u_model;

    	void main(void) {
        gl_Position = u_projection * u_view * u_model * a_position;
    	}
    </script>
    <script id="FragmentShader_BUN" type="x-shader/x-fragment">
     #ifdef GL_OES_standard_derivatives
        #extension GL_OES_standard_derivatives : enable
    #endif

    precision mediump float;
    varying vec3 interpL;
    varying vec3 interpV;
    varying vec3 interpN;
    uniform vec3 u_color;

    vec3 K_a = vec3(0.1745, 0.01175, 0.01175);
		//vec3 K_d = vec3(0.61424, 0.04136, 0.04136);
		vec3 K_s = vec3(0.727811, 0.626959, 0.626959);
    float n = 0.6;

    void main(void){
      vec3 L = normalize(interpL);
      vec3 V = normalize(interpV);
      vec3 N = normalize(interpN);
      vec3 R = normalize(2.0*clamp(dot(N,L), 0.0, 1.0)*N-L);
      vec3 K_d = u_color;

      vec3 vColor = K_a + K_d*clamp(dot(N,L),0.0, 1.0) + K_s*pow(clamp(dot(R,V),0.0, 1.0),n);
      gl_FragColor = vec4(vColor, 1.0);
    }

</script>
<script id="VertexShader_BUN" type="x-shader/x-vertex">

		attribute vec3 a_position;
		attribute vec3 a_normal;

    uniform mat4 u_model;
    uniform mat4 u_camera;
    uniform mat4 u_view;
    uniform mat4 u_projection;
		uniform vec3 u_lightPos;

    varying vec3 interpL;
    varying vec3 interpV;
    varying vec3 interpN;

    void main(void) {
        gl_Position = u_projection * u_view * u_model * vec4(a_position, 1.0);
        vec3 vert = (u_view * u_model * vec4(a_position,1.0)).xyz;

        interpL = u_lightPos - vert;
				//interpL = vert - u_lightPos;
        interpV = -vert;
        interpN = vec3(u_view * u_model * vec4(a_normal, 0.0));
    }
</script>
    <script>
      //set up webgl context
      function setup() {
        var canvas = document.getElementById("glcanvas");
        var gl = canvas.getContext("webgl");
        if (!gl)
          return;
        main(gl,5);
      }
      //setup();
    </script>
  </body>
</html>
